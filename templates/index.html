<!DOCTYPE html>
<html>
<head>
    <style>
        body{
          background: rgba(3, 3, 66, 0.94);
        }
        input[type="file"] {
            color: white;
        }
        .model-card{
          background: rgba(3, 3, 66, 0.94);
          box-shadow:0 8px 92px 20px rgb(91, 46, 136);
          backdrop-filter:blur(24px);
          border-radius:10px;
          border:3px solid #101010;
          margin:auto;
          margin-bottom:30px;width:90%;max-width:1100px
        }
        .model-card-container{
          display:flex;
          flex-direction:row;
          margin:auto;width:100%;
          max-width:fit-content;
          justify-content:center;
          padding:20px
        }
        .model-card-col{
          display:flex;
          flex-direction:column;
          margin:auto;
          width:100%;
          max-width:fit-content;
          justify-content:center;
          min-width:270px;
          padding:0px 20px 0px 20px
        }
        .model-input-col {
            margin-left: 170px;
        }
        .placeholder-image{
            max-width: 80%;
            height: auto;
            margin-left: 20px;
        }
        .edit-buttons-container{display:flex;flex-direction:column;justify-content:center;align-items:center}
        .try-it-result-area{text-align:left;border-radius:8px;background-color:transparent;max-width:fit-content;max-height:fit-content;margin:auto; margin-top: 20px; color:#fff}
    </style>
    <meta charset="UTF-8">
    <h1 style="text-align:center; color: white; font-size: 48px">Image Colorization</h1>
</head>
<body>
    <div class="model-card">
      <div class="model-card-container">
          <div class="model-card-col">
            <span class="model-input-col">
                <h2 style="color: #99b7ea">Upload your file here</h2>

                <form class="show-for-file-upload-mode" action="javascript:colorizeImage()" enctype="multipart/form-data">
                    <input type="file" name="image" accept="image/*" required/>
                    <br><br>
                    <button style="background-color: #99b7ea; border-radius: 20px; margin-left: 40px; font-size: 24px; padding:3% 6%" type="submit" id="enhance-model-image">Colorize</button>
                </form>
            </span>
          </div>
          <div class="model-card-col">
            <div class="try-it-result-area" id="place_holder_picture_model">
              <img class="placeholder-image" src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQj0Lf6TzjxZzUL1svPO-A.jpeg" alt="example">
            </div>
          </div>
      </div>
        <h2 id="result-heading" style="text-align:center; color: white; font-size: 36px; display: none;">Result:</h2>
        <img id="result-img" src="" alt="Colorized Image" style="display: none; margin: 0 auto">
        <br>
        <div class="edit-buttons-container">
            <a id="download-link" href="" download style="display: none; color: #99b7ea;">Download</a>
        </div>
    </div>

    <script>
        // Функція для обробки відповіді від сервера та встановлення зображення результату
        function handleResponse() {
            // показати рядок "Result:"
            var resultHeading = document.getElementById("result-heading");
            resultHeading.style.display = "block";
            // Показати зображення
            var resultImg = document.getElementById("result-img");
            resultImg.style.display = "block";
            resultImg.src = "http://127.0.0.1:5000/colorized_image.jpg?t=" + new Date().getTime();
            // Показати посилання для завантаження
            var downloadLink = document.getElementById("download-link");
            downloadLink.style.display = "inline";
            downloadLink.href = "http://127.0.0.1:5000/colorized_image.jpg?t=" + new Date().getTime();
        }

        // Функція для відправки запиту на сервер
        function colorizeImage() {
            var form = document.querySelector("form");
            var formData = new FormData(form);

            fetch('/colorize', {
                method: 'POST',
                body: formData
            })
            .then(response => response.blob())
            .then(handleResponse);
        }
    </script>
</body>
</html>